import express from 'express';
import cors from 'cors';
import morgan from 'morgan';
import { attachRequestId } from '../logger.js';
import healthRouter from './health.router.js';
import processRouter from '../features/process/process.router.js';
import statusRouter from '../features/status/status.router.js';
import framesRouter from '../features/frames/frames.router.js';
import thumbnailsRouter from '../features/thumbnails/thumbnails.router.js';
import captionsRouter from '../features/captions/captions.router.js';
import visionRouter from '../features/vision/vision.router.js';
import recommendationsRouter from '../features/recommendations/recommendations.router.js';
import safetyRouter from '../features/safety/safety.router.js';
import videosRouter from '../features/videos/videos.router.js';
import uploadRouter from '../features/upload/upload.router.js';
import hooksRouter from '../features/hooks/hooks.router.js';
import oauthRouter from '../features/oauth/oauth.router.js';
import youtubeRouter from '../features/youtube/youtube.router.js';
import adminRouter from '../features/admin/admin.router.js';
import budgetRouter from '../features/budget/budget.router.js';
const app = express();
app.use(express.json({ limit: '10mb' }));
app.use(cors());
app.use(morgan('dev'));
app.use(attachRequestId);
app.use('/', healthRouter);
app.use('/process', processRouter);
app.use('/status', statusRouter);
app.use('/frames', framesRouter);
app.use('/thumbnails', thumbnailsRouter);
app.use('/captions', captionsRouter);
app.use('/vision', visionRouter);
app.use('/recommendations', recommendationsRouter);
app.use('/safety', safetyRouter);
app.use('/videos', videosRouter);
app.use('/upload-url', uploadRouter);
app.use('/hooks', hooksRouter);
app.use('/oauth', oauthRouter);
app.use('/youtube', youtubeRouter);
app.use('/admin', adminRouter);
app.use('/budget', budgetRouter);
export default app;
